@using PCM_LavoroAgile.Extensions;
@model AccordoViewModel
@{
    ViewData["Title"] = "Dettagli accordo";
    var strutture = (IEnumerable<StrutturaViewModel>)ViewData["strutture"];

    //Style che abilita o meno tutti i campi contenuti nel div a cui è applicato
    string classStyle = "border:thin gray solid;";

    //1 - L'Accordo puo' essere modificato solo se è in determinati stati, rispetta le stesse regole di visiblità del pulsante salva
    if ((Model.Stato == StatoAccordo.Bozza ||
        Model.Stato == StatoAccordo.RichiestaModificaCI ||
        Model.Stato == StatoAccordo.RichiestaModificaCS ||
        Model.Stato == StatoAccordo.RichiestaModificaRA) ||
        Model.Ripianificare)
    {
        classStyle = "border:thin gray solid;";
    }
    else
    {
        classStyle = "border:thin gray solid; pointer-events:none;";
    }

    //2- Nel caso di Referente Interno o  Segreteria Tecnica vanno abilitati solo i campi di loro competenza
    if (Context.Request.Query["role"].Equals(RoleAndKeysClaimEnum.KEY_CLAIM_SEGRETERIA_TECNICA.ToDescriptionString()) ||
        Context.Request.Query["role"].Equals(RoleAndKeysClaimEnum.KEY_CLAIM_REFERENTE_INTERNO.ToDescriptionString()) ||
        Model.Ripianificare
        )
    {
        classStyle = "border:thin gray solid; pointer-events:none;";
    }
}
<div class="row">
    <div class="col px-lg-2">
        <nav class="breadcrumb-container" aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item">
                    <a href="/Home">Home</a><span class="separator">/</span>
                </li>
                <li class="breadcrumb-item">
                    <a href="/Accordi?role=@Context.Request.Query["role"]">Accordi</a><span class="separator">/</span>
                </li>
                <li class="breadcrumb-item active">
                    <a href="#">Dettagli accordo</a>
                </li>
            </ol>
        </nav>
    </div>
</div>

@if (Model.Ripianificare)
{
    <div class="alert alert-danger" role="alert">
        @*Va tenuto presente che la data inizio dell'accordo, poichè già trascorsa, sarà sostituita dal sistema con la data in cui si richiede la sottoscrizione.<br />
        Le date già pianificate al di fuori del nuovo intervallo, non verranno considerate valide.*@

        Va tenuto presente che la data inizio dell'accordo, poichè già trascorsa, sarà sostituita dal sistema con la data in cui si richiede la sottoscrizione.<br />
        Le date già pianificate al di fuori del nuovo intervallo, non verranno considerate valide e, nel caso di pianificazione di giornate prescelte, dovranno essere deselezionate."
    </div>
}

<div class="row border-bottom mb-5">
    <div class="col">
        <div class="row">
            <div class="col">
                <h1 class="primary-color">@ViewData["Title"] @Model.DescriptiveCode</h1>
            </div>
        </div>
    </div>
</div>
<!-- Modale delle dialog -->
<partial name="_StoricoStatiDialog" model="Model.StoricoStato" />
<partial name="_ApprovaRifiutaIntegraRecediDialog" />
<partial name="_DifferenzaAccordiDialog" />
<partial name="_MoreDetailsDialog" />

@if (Model.Transmission != null)
{
    <partial name="_StatoInvioDialog" model="Model.Transmission" />
}

<div class="container affix-parent">
    <div class="bg-white affix-top p-3 foreground">
        <!-- Barra delle azioni -->
        <partial name="_ActionsPartial" />
    </div>

    <form asp-action="Edit" id="form" asp-route-role="@Context.Request.Query["role"]">
        <div asp-validation-summary="ModelOnly" class="text-danger"></div>

        <!--Hidden-->
        @Html.HiddenFor(a => a.Id)
        @Html.HiddenFor(a => a.Dipendente.Id)
        @Html.HiddenFor(a => a.CreationDate)
        @Html.HiddenFor(a => a.EditTime)
        @Html.HiddenFor(a => a.StrutturaUfficioServizio)
        @Html.HiddenFor(a => a.NumLivelliStruttura)
        @Html.HiddenFor(a => a.DirigenteResponsabile.Email)
        @Html.HiddenFor(a => a.DirigenteResponsabile.NomeCognome)
        @Html.HiddenFor(a => a.Ripianificare)
        @Html.HiddenFor(a => a.ChildId)
        @Html.HiddenFor(a => a.ParentId)
        @Html.HiddenFor(a => a.InitializedFromExtenalService)
        @Html.HiddenFor(a => a.Stato)
        @Html.HiddenFor(a => a.RevisioneAccordo)
        
        <!--Il parametro trasmetti notifica al metodo Edit se effettuare una trasmissione o meno-->
        <input hidden id="trasmetti" name="trasmetti" value="false" />
        <!--Il parametro deroga, notifica al metodo Edit se impostare lo stato di valutazione della Segr. Tecnica o trasmettere al responsabile-->
        <input hidden id="deroga" name="deroga" value="false" />
        <!--Hidden-->


        <h4 class="primary-color">Anagrafica</h4>
        <br />
        <div style="@classStyle" class="p-5">
            <fieldset id="anag-1-fieldset" class="@(Model.InitializedFromExtenalService ? "disable-form" : "")">
                <div class="form-row">
                    <div class="form-group col">
                        <input type="text" class="form-control" id="NomeCognome" asp-for="Dipendente.NomeCognome" autocomplete="off">
                        <label for="NomeCognome">Nome Cognome <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","NomeCognome"}})"/></label>
                        <span asp-validation-for="Dipendente.NomeCognome" class="text-danger"></span>
                    </div>
                    <div class="it-datepicker-wrapper">
                        <div class="form-group col">
                            <input class="form-control it-date-datepicker" id="DataDiNascita" placeholder="gg/mm/aaaa" type="text" asp-for="Dipendente.DataDiNascita" autocomplete="off">
                            <label for="DataDiNascita">Data di nascita <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","DataDiNascita"}})" /></label>
                            <span asp-validation-for="Dipendente.DataDiNascita" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="form-group col" hidden>
                        <input type="text" class="form-control" id="sesso" asp-for="Dipendente.Sesso" autocomplete="off">
                        <label for="sesso">Sesso</label>
                        <span asp-validation-for="Dipendente.Sesso" class="text-danger"></span>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col">
                        <input type="text" class="form-control" id="LuogoDiNascita" asp-for="Dipendente.LuogoDiNascita" autocomplete="off">
                        <label for="LuogoDiNascita">Luogo di nascita <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","LuogoDiNascita"}})" /></label>
                        <span asp-validation-for="Dipendente.LuogoDiNascita" class="text-danger"></span>
                    </div>
                    <div class="form-group col">
                        <input type="text" class="form-control" id="CodiceFiscale" asp-for="Dipendente.CodiceFiscale" maxlength="16" autocomplete="off">
                        <label for="CodiceFiscale">Codice Fiscale <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","CodiceFiscale"}})" /></label>
                        <span asp-validation-for="Dipendente.CodiceFiscale" class="text-danger"></span>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col">
                        <input type="text" class="form-control" id="Email" asp-for="Dipendente.Email" value="@Model.Dipendente.Email" autocomplete="off">
                        <label for="Email">Email <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","EmailDipendente"}})" /></label>
                        <span asp-validation-for="Dipendente.Email" class="text-danger"></span>
                    </div>
                    <div class="form-group col">
                        <input type="tel" class="form-control @(Model.InitializedFromExtenalService && (Model.Stato == StatoAccordo.Bozza ||
                                        Model.Stato == StatoAccordo.RichiestaModificaCI ||
                                        Model.Stato == StatoAccordo.RichiestaModificaCS ||
                                        Model.Stato == StatoAccordo.RichiestaModificaRA) &&
                                        Context.Request.Query["role"].Equals(RoleAndKeysClaimEnum.KEY_CLAIM_UTENTE.ToDescriptionString())
                                        ? "enable-field" : "")" id="Telefono" asp-for="Telefono" autocomplete="none">
                        <label for="Telefono">Telefono <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","Telefono"}})" /></label>
                        <span asp-validation-for="Telefono" class="text-danger"></span>
                    </div>
                    <div class="it-datepicker-wrapper">
                        <div class="form-group col">
                            <input class="form-control it-date-datepicker @(Model.InitializedFromExtenalService && (Model.Stato == StatoAccordo.Bozza ||
                                        Model.Stato == StatoAccordo.RichiestaModificaCI ||
                                        Model.Stato == StatoAccordo.RichiestaModificaCS ||
                                        Model.Stato == StatoAccordo.RichiestaModificaRA) &&
                                        Context.Request.Query["role"].Equals(RoleAndKeysClaimEnum.KEY_CLAIM_UTENTE.ToDescriptionString())
                                        ? "enable-field" : "")" id="DataPresaServizio" placeholder="gg/mm/aaaa" type="text" asp-for="DataPresaServizio" autocomplete="off">
                            <label for="DataPresaServizio">Data presa servizio <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","DataPresaServizio"}})" /></label>
                            <span asp-validation-for="DataPresaServizio" class="text-danger"></span>
                        </div>
                    </div>
                </div>
                <!--Al momento si è concordato che i campi Posizione giuridica e Fascia retributiva vengono recuperati dall'ERP e non inseriti dall'utente-->
                <div class="form-row" hidden>
                    <div class="form-group col">
                        <div class="bootstrap-select-wrapper">
                            <select asp-for="Dipendente.PosizioneGiuridica" class="form-control" aria-label="Posizione giuridica">
                                <option value="" disabled selected>Selezionare una posizione giuridica</option>
                                <option value="Ruolo">Ruolo</option>
                                <option value="Comando/Fuori ruolo">Comando/Fuori ruolo</option>
                                <option value="Estraneo alla PA">Estraneo alla PA</option>
                            </select>
                            <label for="PosizioneGiuridica">Posizione giuridica</label>
                            <span asp-validation-for="Dipendente.PosizioneGiuridica" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="form-group col">
                        <div class="bootstrap-select-wrapper">
                            <select asp-for="Dipendente.CategoriaFasciaRetributiva" class="form-control" aria-label="Categoria / Fascia retributiva">
                                <option value="" disabled selected>Selezionare una Categoria/Fascia retributiva</option>
                                <option value="Dirigente di prima fascia">Dirigente di prima fascia</option>
                                <option value="Dirigente di seconda fascia">Dirigente di seconda fascia</option>
                                <option value="A F9">A F9</option>
                                <option value="A F8">A F8</option>
                                <option value="A F7">A F7</option>
                                <option value="A F6">A F6</option>
                                <option value="A F5">A F5</option>
                                <option value="A F4">A F4</option>
                                <option value="A F3">A F3</option>
                                <option value="A F2">A F2</option>
                                <option value="A F1">A F1</option>
                                <option value="B F9">B F9</option>
                                <option value="B F8">B F8</option>
                                <option value="B F7">B F7</option>
                                <option value="B F6">B F6</option>
                                <option value="B F5">B F5</option>
                                <option value="B F4">B F4</option>
                                <option value="B F3">B F3</option>
                                <option value="B F2">B F2</option>
                                <option value="B F1">B F1</option>
                            </select>
                            <label for="CategoriaFasciaRetributiva">Categoria / Fascia retributiva</label>
                            <span asp-validation-for="Dipendente.PosizioneGiuridica" class="text-danger"></span>
                        </div>
                    </div>
                </div>
            </fieldset>
            <div class="form-row">
                <div id="select-struttura-div" class="form-group col" hidden="hidden">
                    <div class="bootstrap-select-wrapper">
                        <select id="ddlStrutture" asp-for="UidStrutturaUfficioServizio" class="form-control" asp-items='new SelectList(strutture, "Id", "StrutturaCompleta")' data-live-search="true">
                            <option value="" disabled selected>Selezionare una struttura</option>
                        </select>
                        <label for="UidStrutturaUfficioServizio" class="control-label">Ricerca del responsabile dell’accordo per Struttura/Ufficio/Servizio</label>
                        <span asp-validation-for="UidStrutturaUfficioServizio" class="text-danger"></span>
                    </div>
                </div>
                <div id="descr-struttura-div" class="form-group col">
                    <input type="text" id="strutturaUfficioServizio" class="form-control" asp-for="StrutturaUfficioServizio" readonly>
                    <label for="strutturaUfficioServizio">Struttura/Ufficio/Servizio <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","StrutturaUfficioServizio"}})" /></label>
                </div>
            </div>
            @*<fieldset id="anag-2-fieldset" class="@(Model.InitializedFromExtenalService ? "disable-form" : "")">*@
            <fieldset id="anag-2-fieldset">
                <div class="form-row">
                    <div class="form-group col">
                        <input type="text" class="form-control" id="ResponsabileAccordo" asp-for="ResponsabileAccordo.NomeCognome" placeholder="Responsabile dell'accordo" autocomplete="off">
                        <label>Responsabile dell'accordo <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","ResponsabileAccordo"}})" /></label>
                        <span asp-validation-for="ResponsabileAccordo.NomeCognome" class="text-danger"></span>
                    </div>
                    <div class="form-group col" id="divCapoIntermedio">
                        <input type="text" class="form-control" id="CapoIntermedio" asp-for="CapoIntermedio.NomeCognome" placeholder="Coordinatore dell'Ufficio o altro superiore gerarchico" autocomplete="off">
                        <label>Coordinatore dell'Ufficio o altro superiore gerarchico <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","CoordinatoreUfficio"}})" /></label>
                        <span asp-validation-for="CapoIntermedio.NomeCognome" class="text-danger"></span>
                    </div>
                    <div class="form-group col">
                        <input type="text" class="form-control" id="CapoStruttura" asp-for="CapoStruttura.NomeCognome" placeholder="Responsabile apicale della struttura" autocomplete="off">
                        <label>Responsabile apicale della struttura <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","CapoStruttura"}})" /></label>
                        <span asp-validation-for="CapoStruttura.NomeCognome" class="text-danger"></span>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col">
                        <input type="text" class="form-control" id="ResponsabileAccordoEmail" asp-for="ResponsabileAccordo.Email" placeholder="Email" autocomplete="off" aria-label="Email responsabile dell'accordo">
                        <label>Email <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","EmailResponsabileAccordo"}})" /></label>
                        <span asp-validation-for="ResponsabileAccordo.Email" class="text-danger"></span>
                    </div>
                    <div class="form-group col" id="divEmailCapoIntermedio">
                        <input type="text" class="form-control" id="CapoIntermedioEmail" asp-for="CapoIntermedio.Email" placeholder="Email" autocomplete="off" aria-label="Email coordinatore dell'Ufficio o altro superiore gerarchico">
                        <label>Email <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","EmailCoordinatoreUfficio"}})" /></label>
                        <span asp-validation-for="CapoIntermedio.Email" class="text-danger"></span>
                    </div>
                    <div class="form-group col">
                        <input type="text" class="form-control" id="CapoStrutturaEmail" asp-for="CapoStruttura.Email" placeholder="Email" autocomplete="off" aria-label="Email responsabile apicale della struttura">
                        <label>Email <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","EmailCapoStruttura"}})" /></label>
                        <span asp-validation-for="CapoStruttura.Email" class="text-danger"></span>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col">
                        <input type="text" class="form-control" id="ReferenteInterno" asp-for="ReferenteInterno.NomeCognome" placeholder="Referente Interno" autocomplete="off" readonly>
                        @*<label for="ReferenteInterno">ReferenteInterno</label>*@
                        <label>Referente interno <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","ReferenteInterno"}})" /></label>
                        <span asp-validation-for="ReferenteInterno.NomeCognome" class="text-danger"></span>
                    </div>
                    <div class="form-group col">
                        <input type="text" class="form-control" id="ReferenteInternoEmail" asp-for="ReferenteInterno.Email" placeholder="Email Referente Interno" autocomplete="off" readonly>
                        @*<label for="UidReferenteInterno">EmailReferenteInterno</label>*@
                        <label>Email referente interno <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","EmailReferenteInterno"}})" /></label>
                        <span asp-validation-for="ReferenteInterno.Email" class="text-danger"></span>
                    </div>
                </div>
            </fieldset>
        </div>

        <br />
        <h4 class="primary-color">Dichiarazioni aggiuntive <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","DichiarazioniAggiuntive"}})" /></h4>
        <br />

        <div style="@classStyle" class="p-5">
            <div class="form-row">
                <div class="form-group col">
                    <div class="form-check">
                        <input type="checkbox" class="form-control" id="Priorita_1" asp-for="Priorita_1">
                        <label for="Priorita_1" class="text-wrap" style="height:100%">
                            Dichiara di essere genitore nei tre anni successivi alla conclusione del periodo
                            di congedo di maternità previsto dall’articolo 16 del decreto legislativo 26 marzo 2001, n. 151
                        </label>
                        <span asp-validation-for="Priorita_1" class="text-danger"></span>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" class="form-control" id="Priorita_2" asp-for="Priorita_2">
                        <label for="Priorita_2" class="text-wrap" style="height:100%">
                            Dichiara di essere genitore con figli in condizioni di disabilità ai sensi dell’articolo 3,
                            comma 3, della legge 5 febbraio 1992, n. 104.
                        </label>
                        <span asp-validation-for="Priorita_2" class="text-danger"></span>
                    </div>
                </div>
            </div>
        </div>

        <br />
        <h4 class="primary-color">Caratteristiche dell'accordo</h4>
        <br />

        <div style="@classStyle" class="p-5">
            <div class="form-row">
                <div class="form-group col">
                    <div class="form-check">
                        <input type="checkbox" class="form-control" id="PrimoAccordo" asp-for="PrimoAccordo" readonly>
                        <label for="PrimoAccordo">Primo accordo <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","PrimoAccordo"}})" /></label>
                        <span asp-validation-for="PrimoAccordo" class="text-danger"></span>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" class="form-control" id="DerogaPianificazioneDate" asp-for="DerogaPianificazioneDate" readonly onchange="initAlertDeroga();">
                        <label for="DerogaPianificazioneDate">Deroga autorizzata (art. 6, co. 3 della Direttiva 2 maggio 2019) <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","Deroga"}})" /></label>
                        <span asp-validation-for="DerogaPianificazioneDate" class="text-danger"></span>
                        <p id="alertDeroga" style="font-style:oblique; display:none;">
                            L'accordo in deroga è soggetto alla supervisione della Segreteria Tecnica per il lavoro agile, ad esito dell'iter autorizzatorio:<br/>
                            - in caso di conformità, l'accordo verrà trasmesso al responsabile<br/>
                            - in caso di non conformità, l'accordo verrà riportato in BOZZA e le motivazioni saranno riportate nelle note condivise in fondo all'accordo
                        </p>
                    </div>
                </div>
                <!--Si è concorodato che nella fase iniziale non si tiene conto di queste informazioni-->
                <div class="it-datepicker-wrapper" id="divDataFineAccordoPrecedente" hidden>
                    <div class="form-group col">
                        <input class="form-control it-date-datepicker" id="DataFineAccordoPrecedente" placeholder="gg/mm/aaaa" type="text" asp-for="DataFineAccordoPrecedente" autocomplete="off">
                        <label for="DataFineAccordoPrecedente">Data fine accordo precedente</label>
                        <span asp-validation-for="DataFineAccordoPrecedente" class="text-danger"></span>
                    </div>
                </div>
                <div class="form-group col" id="divValutazioneEsitiAccordoPrecedente" hidden>
                    <input type="text" class="form-control" id="ValutazioneEsitiAccordoPrecedente" asp-for="ValutazioneEsitiAccordoPrecedente">
                    <label for="ValutazioneEsitiAccordoPrecedente">Valutazione esiti accordo precedente</label>
                    <span asp-validation-for="ValutazioneEsitiAccordoPrecedente" class="text-danger"></span>
                </div>
            </div>

            <div class="form-row">
                <div class="it-datepicker-wrapper">
                    <div class="form-group col">
                        <input class="form-control it-date-datepicker" id="DataInizioUtc" placeholder="gg/mm/aaaa" type="text" asp-for="DataInizioUtc" autocomplete="off" data-data-min-inzio-accodo="@(Model.DataFineAccordoPrecedente?.AddDays(1))" onkeydown="return false">
                        <label for="DataInizioUtc">Data inizio <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","DataInizio"}})" /></label>
                        <span asp-validation-for="DataInizioUtc" class="text-danger"></span>
                    </div>
                </div>
                <div class="it-datepicker-wrapper">
                    <div class="form-group col">
                        <input class="form-control it-date-datepicker" id="DataFineUtc" placeholder="gg/mm/aaaa" type="text" asp-for="DataFineUtc" autocomplete="off" onkeydown="return false">
                        <label for="DataFineUtc">Data fine <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","DataFine"}})" /></label>
                        <span asp-validation-for="DataFineUtc" class="text-danger"></span>
                    </div>
                </div>
                <div class="form-group col">
                    <div class="bootstrap-select-wrapper">
                        <select id="ModalitaPianificazione" asp-for="Modalita" class="form-control" aria-label="Modalità di svolgimento del lavoro agile">
                            <option value="" disabled selected>Selezionare una modalità</option>
                            <option value="OrdinariaUnGiorno">Un giorno a settimana</option>
                            <option value="OrdinariaDueGiorni">Due giorni a settimana</option>
                            <option value="Eccezionale">Giornate prescelte</option>
                        </select>
                        <label for="Modalita">Modalità di svolgimento del lavoro agile <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","ModalitaPianificazione"}})" /></label>
                        <span asp-validation-for="Modalita" class="text-danger"></span>
                    </div>
                </div>
                <div class="form-group col" id="divPianificazioneGiorniAccordo">
                    <div class="bootstrap-select-wrapper">
                        <select id="PianificazioneGiorniAccordo" asp-for="PianificazioneGiorniAccordo" class="form-control" multiple aria-label="Pianificazione giorni accordo">
                            <option value="Lunedì">Lunedì</option>
                            <option value="Martedì">Martedì</option>
                            <option value="Mercoledì">Mercoledì</option>
                            <option value="Giovedì">Giovedì</option>
                            <option value="Venerdì">Venerdì</option>
                        </select>
                        <label for="PianificazioneGiorniAccordo">Pianificazione giorni accordo <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","PianificazioneGiorni"}})" /></label>
                        <span asp-validation-for="PianificazioneGiorniAccordo" class="text-danger"></span>                                       
                    </div>
                    @if(Model.Stato != StatoAccordo.Bozza)
                    {
                        <div style="text-align:right; padding-right:5px">
                            <button type="button" id="moreDetailsPianificazioneDate-input" class="btn-link border-0" style="background:transparent; pointer-events:all" data-action="dettagliPianificazioneDate">Dettagli</button>
                        </div>   
                    }
                </div>
            </div>

            <!--Se sono un Responabile, Cap Intermedio, Capo Strurruta o l'accordo è da ripianificare,
                il calendario di pianificazione date deve essere abilitato.
                Nel caso della ripianificazione serve per effettuare l'oprazione, in tutti gli altri
                serve a poter visualizzare meglio le date pianificate, gli attori approvatori non hanno
                possibilità di salvare nulla.
            -->
            @{
                string classStylePianificazioneDateAccordo = "";
                if (Model.Ripianificare ||
                Context.Request.Query["role"].Equals(RoleAndKeysClaimEnum.KEY_CLAIM_RESPONSABILE_ACCORDO.ToDescriptionString()) ||
                Context.Request.Query["role"].Equals(RoleAndKeysClaimEnum.KEY_CLAIM_CAPO_INTERMEDIO.ToDescriptionString()) ||
                Context.Request.Query["role"].Equals(RoleAndKeysClaimEnum.KEY_CLAIM_CAPO_STRUTTURA.ToDescriptionString())
                )
                {
                    classStylePianificazioneDateAccordo = "pointer-events:all;";
                }
            }

            <div class="form-row" id="divPianificazioneDateAccordo">
                <div class="form-group col" style="@classStylePianificazioneDateAccordo">
                    <input id="PianificazioneDateAccordo" type="text" asp-for="PianificazioneDateAccordo" readonly>
                    <label for="PianificazioneDateAccordo">Pianificazione date accordo <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","PianificazioneDate"}})" /></label>
                    <span asp-validation-for="PianificazioneDateAccordo" class="text-danger"></span>      
                    @if(Model.Stato != StatoAccordo.Bozza)
                    {
                        <div style="text-align:right; padding-right:5px">
                            <button type="button" id="moreDetailsPianificazioneDate-input" class="btn-link border-0" style="background:transparent; pointer-events:all" data-action="dettagliPianificazioneDate">Dettagli</button>
                        </div>  
                    }
                </div>  
            </div>

            <div>
                <div class="form-group col">
                    <div class="bootstrap-select-wrapper">
                        <select id="FasceDiContattabilita" asp-for="FasceDiContattabilita" class="form-control" multiple aria-label="Fasce di contattabilità">
                            <option value="7.00 - 8.00">7.00 - 8.00</option>
                            <option value="8.00 - 9.00">8.00 - 9.00</option>
                            <option value="9.00 - 10.00">9.00 - 10.00</option>
                            <option value="10.00 - 11.00">10.00 - 11.00</option>
                            <option value="11.00 - 12.00">11.00 - 12.00</option>
                            <option value="12.00 - 13.00">12.00 - 13.00</option>
                            <option value="13.00 - 14.00">13.00 - 14.00</option>
                            <option value="14.00 - 15.00">14.00 - 15.00</option>
                            <option value="15.00 - 16.00">15.00 - 16.00</option>
                            <option value="16.00 - 17.00">16.00 - 17.00</option>
                            <option value="17.00 - 18.00">17.00 - 18.00</option>
                            <option value="18.00 - 19.00">18.00 - 19.00</option>
                            <option value="19.00 - 20.00">19.00 - 20.00</option>
                        </select>
                        <label for="FasceDiContattabilita">Fasce di contattabilità <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","FasceContattabilita"}})" /></label>
                        <span asp-validation-for="FasceDiContattabilita" class="text-danger"></span>                       
                    </div>
                    @if(Model.Stato != StatoAccordo.Bozza)
                    {
                        <div style="text-align:right">
                            <button type="button" id="moreDetailsReperibilita-input" class="btn-link border-0" style="background:transparent; pointer-events:all" data-action="dettagliFasceContattabilita">Dettagli</button>
                        </div> 
                    }
                </div>
                <div class="form-group col">
                    @*<div class="bootstrap-select-wrapper">
                        <input type="text" class="form-control" list="select-list-id" asp-for="StrumentazioneUtilizzata" />
                        <datalist id="select-list-id" class="form-control">
                        <option value="Di proprietà"></option>
                        <option value="Della PCM"></option>
                        </datalist>
                        <label for="StrumentazioneUtilizzata">Strumentazione utilizzata</label>
                        <span asp-validation-for="StrumentazioneUtilizzata" class="text-danger"></span>
                        </div>*@
                    <div class="bootstrap-select-wrapper">
                        <select id="StrumentazioneUtilizzata" asp-for="StrumentazioneUtilizzata" class="form-control" aria-label="Strumentazione utilizzata">
                            <option value="Di proprietà">Di proprietà</option>
                            <option value="Della PCM">Della PCM</option>
                        </select>
                        <label for="StrumentazioneUtilizzata">Strumentazione utilizzata <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","Strumentazione"}})" /></label>
                        <span asp-validation-for="StrumentazioneUtilizzata" class="text-danger"></span>
                    </div>
                </div>
            </div>
        </div>

        <br />
        <h4 class="primary-color">Organizzazione del lavoro</h4>
        <br />

        <div style="@classStyle" class="p-5">
            <div class="table-responsive">
                <table id="tableAttivita" class="table">
                    <tbody>
                        <tr style="@((Model.Stato == StatoAccordo.Bozza ||
                                        Model.Stato == StatoAccordo.RichiestaModificaCI ||
                                        Model.Stato == StatoAccordo.RichiestaModificaCS ||
                                        Model.Stato == StatoAccordo.RichiestaModificaRA) &&
                                        Context.Request.Query["role"].Equals(RoleAndKeysClaimEnum.KEY_CLAIM_UTENTE.ToDescriptionString())
                                        ?"display:yes":"display:none")">
                            <td width="5%"></td>
                            <td width="85%">
                                <div class="form-row mt-3">
                                    <div class="form-group col">
                                        <textarea class="form-control border" rows="3" id="Attivita" name="Attivita" aria-label="Attività" placeholder="Descrivere attività oggetto dell’accordo"></textarea>
                                        <label for="Attivita">Attività <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","Attivita"}})" /></label>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group col">
                                        <textarea class="form-control border" rows="3" id="Risultati" name="Risultati" placeholder="Descrivere i risultati attesi dell'attività"></textarea>
                                        <label for="Risultati">Descrizione risultati attesi <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","RisultatiAttesi"}})" /></label>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group col">
                                        <input class="form-control" type="text" id="DenominazioneIndicatore" name="DenominazioneIndicatore" placeholder="Descrizione denominazione indicatore" />
                                        <label for="DenominazioneIndicatore">Indicatore <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","Indicatore"}})" /></label>
                                    </div>
                                    <div class="form-group col">
                                        <div class="bootstrap-select-wrapper">
                                            <select id="TipologiaIndicatore" class="form-control" name="TipologiaIndicatore" aria-label="Unità di misura">
                                                <option value="Testo">Testo</option>
                                                <option value="NumeroAssoluto">Numero assoluto</option>
                                                <option value="Percentuale">Percentuale</option>
                                                <option value="Data">Data</option>
                                            </select>
                                            <label for="TipologiaIndicatore">Unità di misura <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","UnitaDiMisura"}})" /></label>
                                        </div>
                                    </div>
                                </div>
                                <!--Indicatore Testo-->
                                <div id="DivIndicatoreTesto">
                                    <div class="form-row">
                                        <div class="form-group col">
                                            <div class="bootstrap-select-wrapper">
                                                <select id="OperatoreLogicoIndicatoreTesto" name="OperatoreLogicoIndicatoreTesto" aria-label="Target" class="form-control">
                                                    <option value="uguale a">uguale a</option>
                                                    <option value="diverso da">diverso da</option>
                                                </select>
                                                <label for="OperatoreLogicoIndicatoreTesto">Target <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","Target"}})" /></label>
                                            </div>
                                        </div>
                                        <div class="form-group col">
                                            <input class="form-control" type="text" id="TestoTarget" name="TestoTarget" aria-label="Descrizione target" placeholder="Descrizione target" />
                                            <label for="TestoTarget">Descrizione Target <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","DescrizioneTarget"}})" /></label>
                                        </div>
                                    </div>
                                </div>
                                <!--Fine Indicatore Testo-->
                                <!--Indicatore Numero Assoluto-->
                                <div id="DivIndicatoreNumeroAssoluto">
                                    <div class="form-row">
                                        <div class="form-group col">
                                            <div class="bootstrap-select-wrapper">
                                                <select id="OperatoreLogicoIndicatoreNumeroAssoluto" class="form-control" name="OperatoreLogicoIndicatoreNumeroAssoluto" aria-label="Target">
                                                    <option value="uguale a">uguale a</option>
                                                    <option value="diverso da">diverso da</option>
                                                    <option value="maggiore di">maggiore di</option>
                                                    <option value="maggiore uguale a">maggiore uguale a</option>
                                                    <option value="minore di">minore di</option>
                                                    <option value="minore uguale a">minore uguale a</option>
                                                    <option value="compreso tra">compreso tra</option>
                                                </select>
                                                <label for="OperatoreLogicoIndicatoreNumeroAssoluto">Target <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","Target"}})" /></label>
                                            </div>
                                        </div>
                                        <div id="DivNumeroAssolutoTarget">
                                            <div class="form-group col">
                                                <input class="form-control" type="number" id="NumeroAssolutoTarget" name="NumeroAssolutoTarget" placeholder="Target numerico" aria-label="Target numerico" />
                                                <label for="NumeroAssolutoTarget">Descrizione Target <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","DescrizioneTarget"}})" /></label>
                                            </div>
                                        </div>
                                        <div id="DivNumeroAssolutoDaTarget">
                                            <div class="form-group col">
                                                <input class="form-control" type="number" id="NumeroAssolutoDaTarget" placeholder="Target 'da' numerico" name="NumeroAssolutoDaTarget" aria-label="Target 'da' numerico" />
                                                <label for="NumeroAssolutoDaTarget">Descrizione Target <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","DescrizioneTarget"}})" /></label>
                                            </div>
                                        </div>
                                        <div id="DivNumeroAssolutoATarget">
                                            <div class="form-group col">
                                                <input class="form-control" type="number" id="NumeroAssolutoATarget" placeholder="Target 'a' numerico" name="NumeroAssolutoATarget" aria-label="Target 'a' numerico" />
                                                <label for="NumeroAssolutoATarget">Descrizione Target <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","DescrizioneTarget"}})" /></label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--Fine Indicatore Numero Assoluto-->
                                <!--Indicatore Percentuale-->
                                <div id="DivIndicatorePercentuale">
                                    <div class="form-row">
                                        <div class="form-group col">
                                            <input class="form-control" type="text" id="PercentualeIndicatoreDenominazioneNumeratore" name="PercentualeIndicatoreDenominazioneNumeratore" placeholder="Denominazione numeratore" />
                                            <label for="PercentualeIndicatoreDenominazioneNumeratore">Numeratore <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","NumeratorePercentuale"}})" /></label>
                                        </div>
                                        <div class="form-group col">
                                            <input class="form-control" type="text" id="PercentualeIndicatoreDenominazioneDenominatore" name="PercentualeIndicatoreDenominazioneDenominatore" placeholder="Denominazione denominatore" />
                                            <label for="PercentualeIndicatoreDenominazioneDenominatore">Denominatore <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","DenominatorePercentuale"}})" /></label>
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group col">
                                            <div class="bootstrap-select-wrapper">
                                                <select id="OperatoreLogicoIndicatorePercentuale" name="OperatoreLogicoIndicatorePercentuale" aria-label="Target" class="form-control">
                                                    <option value="uguale a">uguale a</option>
                                                    <option value="diverso da">diverso da</option>
                                                    <option value="maggiore di">maggiore di</option>
                                                    <option value="maggiore uguale a">maggiore uguale a</option>
                                                    <option value="minore di">minore di</option>
                                                    <option value="minore uguale a">minore uguale a</option>
                                                    <option value="compreso tra">compreso tra</option>
                                                </select>
                                                <label for="OperatoreLogicoIndicatorePercentuale">Target <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","Target"}})" /></label>
                                            </div>
                                        </div>
                                        <div id="DivPercentualeTarget">
                                            <div class="form-group col">
                                                <input class="form-control" type="number" id="PercentualeTarget" placeholder="Target numerico" name="PercentualeTarget" aria-label="Target numerico" />
                                                <label for="PercentualeTarget">Descrizione Target <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","DescrizioneTarget"}})" /></label>
                                            </div>
                                        </div>
                                        <div id="DivPercentualeDaTarget">
                                            <div class="form-group col">
                                                <input class="form-control" type="number" id="PercentualeDaTarget" placeholder="Target 'da' numerico" name="PercentualeDaTarget" aria-label="Target 'da' numerico" />
                                                <label for="PercentualeDaTarget">Descrizione Target <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","DescrizioneTarget"}})" /></label>
                                            </div>
                                        </div>
                                        <div id="DivPercentualeATarget">
                                            <div class="form-group col">
                                                <input class="form-control" type="number" id="PercentualeATarget" placeholder="Target 'a' numerico" name="PercentualeATarget" aria-label="Target 'a' numerico" />
                                                <label for="PercentualeATarget">Descrizione Target <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","DescrizioneTarget"}})" /></label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--Fine Indicatore Percentuale-->
                                <!--Indicatore Data-->
                                <div id="DivIndicatoreData">
                                    <div class="form-row">
                                        <div class="form-group col">
                                            <div class="bootstrap-select-wrapper">
                                                <select id="OperatoreLogicoIndicatoreData" name="OperatoreLogicoIndicatoreData" aria-label="Target" class="form-control">
                                                    <option value="uguale a">uguale a</option>
                                                    @*<option value="diverso da">diverso da</option>
                                                        <option value="maggiore di">maggiore di</option>
                                                        <option value="maggiore uguale a">maggiore uguale a</option>
                                                        <option value="minore di">minore di</option>*@
                                                    <option value="minore uguale a">minore uguale a</option>
                                                    <option value="compreso tra">compreso tra</option>
                                                </select>
                                                <label for="OperatoreLogicoIndicatoreData">Target <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","Target"}})" /></label>
                                            </div>
                                        </div>
                                        <div id="DivDataTarget">
                                            <div class="form-group col">
                                                <input class="form-control it-date-datepicker" id="DataTarget" aria-label="Data target" name="DataTarget" placeholder="gg/mm/aaaa" type="text" autocomplete="off">
                                                <label for="DataTarget">Descrizione Target <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","DescrizioneTarget"}})" /></label>
                                            </div>
                                        </div>
                                        <div id="DivDataDaTarget">
                                            <div class="form-group col">
                                                <input class="form-control it-date-datepicker" id="DataDaTarget" name="DataDaTarget" aria-label="Data 'da' target" placeholder="gg/mm/aaaa" type="text" autocomplete="off">
                                                <label for="DataDaTarget">Descrizione Target <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","DescrizioneTarget"}})" /></label>
                                            </div>
                                        </div>
                                        <div id="DivDataATarget">
                                            <div class="form-group col">
                                                <input class="form-control it-date-datepicker" id="DataATarget" name="DataATarget" aria-label="Data 'a' target" placeholder="gg/mm/aaaa" type="text" autocomplete="off">
                                                <label for="DataATarget">Descrizione Target <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","DescrizioneTarget"}})" /></label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--Fine Indicatore Data-->
                                <span asp-validation-for="ListaAttivita" id="validationListaAttivita" class="text-danger"></span>                                
                            </td>
                            <td width="10%" class="align-bottom">
                                <input type="button" class="btn btn-primary" style="width:150px" id="addAttivita" value="Inserisci" />
                            </td>
                        </tr>

                        @foreach (AttivitaAccordoViewModel attivitaAccordoViewModel in Model.ListaAttivita)
                        {
                            <partial name="_AttivitaAccordoPartial" model="attivitaAccordoViewModel"  />
                        }
                    </tbody>
                </table>
            </div>
        </div>

        <br />
        <h4 class="primary-color">Giustificato motivo di recesso <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","GiustificatoMotivoDiRecesso"}})" /></h4>
        <br />
        <div style="@classStyle" class="p-5">
            <div class="form-row">
                <div class="form-group col mb-0">
                    <ul class="it-list">
                        <li>
                            <div class="it-right-zone">
                                <span class="text" style="line-height:50px">Mancato raggiungimento degli obiettivi programmati</span>
                            </div>
                        </li>
                        <li>
                            <div class="it-right-zone">
                                <span class="text" style="line-height:50px">Sopravvenienza di nuove esigenze organizzative</span>
                            </div>
                        </li>
                        <li>
                            <div class="it-right-zone">
                                <span class="text" style="line-height:50px">Cambio struttura</span>
                            </div>
                        </li>
                        <li>
                            <div class="it-right-zone">
                                <span class="text" style="line-height:50px">Cambio responsabile accordo</span>
                            </div>
                        </li>
                        <li>
                            <div class="it-right-zone">
                                <textarea class="form-control border" rows="3" id="GiustificatoMotivoDiRecesso" asp-for="GiustificatoMotivoDiRecesso" placeholder="Aggiungere un eventuali ulteriori giustificati motivi di recesso" aria-label="Giustificato motivo di recesso"></textarea>
                                @*<label for="GiustificatoMotivoDiRecesso">Giustificato motivo di recesso</label>*@
                                <span asp-validation-for="GiustificatoMotivoDiRecesso" class="text-danger"></span>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <br />
        <h4 class="primary-color">Informative <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","Informative"}})" /></h4>
        <br />

        <div style="@classStyle" class="p-5">
            <div class="form-row">
                <div class="form-group col">
                    <div class="form-check">
                        <input type="checkbox" class="form-control" id="SaluteESicurezza" asp-for="SaluteESicurezza" readonly>
                        <label for="SaluteESicurezza">Salute e sicurezza</label>
                    </div>
                    <span asp-validation-for="SaluteESicurezza" class="text-danger"></span>
                    <div style="text-align: justify">
                        Presa visione dell'informativa sui rischi generali e specifici in materia di salute e sicurezza per il lavoratore che svolge
                        la prestazione in modalità agile, se ne accetta integralmente il contenuto.
                        <br /><a style="pointer-events: all" href="/Documents/Allegato B - Informativa salute e sicurezza.pdf" target="_blank">Informativa salute e sicurezza.pdf</a><br />
                    </div>                    
                </div>
            </div>

            <div class="form-row">
                <div class="form-group col">
                    <div class="form-check">
                        <input type="checkbox" class="form-control" id="AccessoVPN" asp-for="AccessoVPN" readonly>
                        <label for="AccessoVPN">Accesso VPN</label>
                    </div>
                    <span asp-validation-for="AccessoVPN" class="text-danger"></span>
                    <div style="text-align: justify">
                        Presa visione dell'informativa con le condizioni per l'accesso VPN alla rete PCM, se ne accetta integralmente il contenuto.
                        <br /><a style="pointer-events: all" href="/Documents/Allegato A - Informativa accesso VPN-PCM.pdf" target="_blank">Informativa accesso VPN-PCM.pdf</a><br />
                    </div>                    
                </div>
            </div>

            <div class="form-row">
                <div class="form-group col">
                    <div class="form-check">
                        <input type="checkbox" class="form-control" id="PrivacyEConsensoTrattamentoDati" asp-for="PrivacyEConsensoTrattamentoDati" readonly>
                        <label for="PrivacyEConsensoTrattamentoDati">Privacy e consenso trattamento dati</label>
                    </div>
                    <span asp-validation-for="PrivacyEConsensoTrattamentoDati" class="text-danger"></span>
                    <div style="text-align: justify">
                        Letta l’informativa sul trattamento dei dati personali, si autorizza il trattamento degli stessi ai sensi del decreto
                        legislativo 30 giugno 2003, n. 196, come modificato dal decreto legislativo 10 agosto 2018, n. 101 e del Regolamento UE 2016/679,
                        per le finalità connesse alla gestione dell’accordo di lavoro agile.
                        <br /><a style="pointer-events: all" href="/Documents/Allegato C - Informativa privacy.pdf" target="_blank">Informativa privacy.pdf</a><br />
                    </div>                    
                </div>
            </div>
        </div>

        <br />
        <h4 class="primary-color">Formazione <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","Formazione"}})" /></h4>
        <br />

        <div style="@classStyle" class="p-5">
            <div class="form-row">
                <div class="form-group col">
                    <div class="form-check">
                        <input type="checkbox" class="form-control" id="FormazioneLavoroAgile" asp-for="FormazioneLavoroAgile" readonly>
                        <label for="FormazioneLavoroAgile">Formazione lavoro agile</label>
                    </div>
                     <span asp-validation-for="FormazioneLavoroAgile" class="text-danger"></span>
                    <div style="text-align: justify">
                        Il sottoscritto dichiara, sotto la propria responsabilità, di aver frequentato moduli formativi specifici in materia di lavoro agile,
                        anche con riferimento ai profili di sicurezza informatica e di salute e sicurezza sul lavoro.
                        <br />
                        Per chi non ha mai stipulato un accordo/progetto di lavoro agile e non ha mai frequentato un corso propedeutico, di seguito i link alle video lezioni.
                        <br /><br />
                        Inquadramento generale, illustrazione del quadro normativo di riferimento; Il lavoro agile come leva di innovazione manageriale e organizzativa.
                        Le fasi del progetto di change management: ruoli e responsabilità per il cambiamento; Presentazione buone pratiche;
                        <br /><a style="pointer-events: all" href="https://snapcm.adobeconnect.com/p17aolr2d78l/" target="_blank">Video Lezione</a>
                        <br /><br />
                        Focus sui profili connessi alla salute e sicurezza
                        <br /><a style="pointer-events: all" href="https://snapcm.adobeconnect.com/pishtm68kmuu/" target="_blank">Video Lezione</a>
                        <br /><br />
                        Gli strumenti organizzativi per l’attuazione del lavoro agile all’interno delle amministrazioni pubbliche; Il monitoraggio dell’attuazione del lavoro agile nelle amministrazioni pubbliche.
                        <br /><a style="pointer-events: all" href="https://snapcm.adobeconnect.com/poqb6wgq8o7q/" target="_blank">Video Lezione</a>
                    </div>                   
                </div>
            </div>
        </div>

        @if (Context.Request.Query["role"].Equals(RoleAndKeysClaimEnum.KEY_CLAIM_REFERENTE_INTERNO.ToDescriptionString()))
        {
            <br />
            <h4 class="primary-color">Referente Interno</h4>
            <br />

            <div class="form-row">
                <div class="form-group col">
                    <textarea class="form-control border" rows="3" id="NoteRefereteInterno" asp-for="NoteRefereteInterno"></textarea>
                    <label for="NoteCondivise">Note Referete Interno</label>
                </div>
            </div>
        }

        @if (Context.Request.Query["role"].Equals(RoleAndKeysClaimEnum.KEY_CLAIM_SEGRETERIA_TECNICA.ToDescriptionString()))
        {
            <br />
            <h4 class="primary-color">Segreteria Tecnica</h4>
            <br />

            <div class="form-row">
                <div class="form-group col">
                    <textarea class="form-control border" rows="3" id="NoteRefereteInterno" asp-for="NoteRefereteInterno" readonly></textarea>
                    <label for="NoteCondivise">Note Referete Interno</label>
                </div>
            </div>

            <div style="border:thin gray solid" class="p-5">
                <div class="form-row">
                    <div class="form-group col">
                        <div class="form-check">
                            <input type="checkbox" class="form-control" id="VistoSegreteriaTecnica" asp-for="VistoSegreteriaTecnica" readonly>
                            <label for="VistoSegreteriaTecnica">Visto Segreteria Tecnica</label>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col">
                        <textarea class="form-control border" rows="3" id="NoteSegrteriaTecnica" asp-for="NoteSegreteriaTecnica"></textarea>
                        <label for="NoteSegrteriaTecnica">Note interne Segreteria Tecnica</label>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col">
                        <textarea class="form-control border" rows="3" id="NoteCondivise" asp-for="NoteCondivise"></textarea>
                        <label for="NoteCondivise">Note condivise</label>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col">
                        <div class="form-check">
                            <input type="checkbox" class="form-control" id="InvioNotificaNoteCondivise" asp-for="InvioNotificaNoteCondivise" readonly>
                            <label for="InvioNotificaNoteCondivise">Invio notifiche note condivise</label>
                        </div>
                    </div>
                </div>
            </div>
        }

        @if (!Context.Request.Query["role"].Equals(RoleAndKeysClaimEnum.KEY_CLAIM_SEGRETERIA_TECNICA.ToDescriptionString()))
        {
            <br />
            <h4 class="primary-color">Note condivise  <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","NoteCondivise"}})" /></h4>
            <br />

            <div class="form-row">
                <div class="form-group col">
                    <textarea class="form-control border" rows="3" id="NoteCondivise" asp-for="NoteCondivise" readonly></textarea>
                    <label for="NoteCondivise">Note condivise</label>
                </div>
            </div>
        }

        <h4 class="primary-color">Stato</h4>
        <br />

        <div class="form-row">
            <div class="form-group col">
                <input type="text" class="form-control" id="Stato" readonly value="@EnumExtensions.ToDescriptionString(Model.Stato)">
                <label for="Stato">Stato <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","Stato"}})" /></label>
                <span asp-validation-for="Stato" class="text-danger"></span>
            </div>
        </div>

        <div class="form-row">
            @if(Model.isValutazionePositiva)
            {
                <div class="form-group col">
                    <input type="text" class="form-control" id="Valutazione" readonly value="Positiva">
                    <label for="Valutazione">Valutazione <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","Valutazione"}})" /></label>

                    <div style="text-align:right">
                        <button type="button" id="moreDetailsValutazione-input" class="btn-link border-0" style="background:transparent; pointer-events:all" data-action="dettagliValutazione">Dettagli</button>
                    </div> 
                </div>                   
                
            }
            @if(!Model.isValutazionePositiva && Model.DataNotaDipendente != null && Model.DataNotaDirigente != null)
            {
                 <div class="form-group col">
                    <input type="text" class="form-control" id="Valutazione" readonly value="Negativa">
                    <label for="Valutazione">Valutazione <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","Valutazione"}})" /></label>        
                    <div style="text-align:right">
                        <button type="button" id="moreDetailsValutazione-input" class="btn-link border-0" style="background:transparent; pointer-events:all" data-action="dettagliValutazione">Dettagli</button>
                    </div>
                </div>    
                
            }
            @if(!Model.isValutazionePositiva && Model.DataNotaDipendente != null && Model.DataNotaDirigente == null)
            {
                 <div class="form-group col">
                    <input type="text" class="form-control" id="Valutazione" readonly value="In attesa di valutazione">
                    <label for="Valutazione">Valutazione <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","Valutazione"}})" /></label>

                    <div style="text-align:right">
                        <button type="button" id="moreDetailsValutazione-input" class="btn-link border-0" style="background:transparent; pointer-events:all" data-action="dettagliValutazione">Dettagli</button>
                    </div>
                </div>
            }
            @if ((Model.Stato == StatoAccordo.Sottoscritto || Model.Stato == StatoAccordo.Recesso || Model.Stato == StatoAccordo.AccordoConcluso) &&
                    Context.Request.Query["role"].Equals(RoleAndKeysClaimEnum.KEY_CLAIM_UTENTE.ToDescriptionString()) && 
                    Model.DataNotaDipendente == null && 
                    Model.DataFineUtc.HasValue && 
                    Model.DataFineUtc.Value.AddDays(-10) <= DateTime.UtcNow
                )
            {
                 <div class="form-group col">
                    <input type="text" class="form-control" id="Valutazione" readonly value="Valutazione da richiedere">
                    <label for="Valutazione">Valutazione <partial name="../Shared/_HelpPartial.cshtml" view-data="@(new ViewDataDictionary(ViewData){{"anchor","Valutazione"}})" /></label>
                </div>  
            }
        </div>
    </form>
</div>

@section Scripts {
<script src="~/js/Accordo.js" asp-append-version="true"></script>
<script src="~/js/resend-data-to-ext.js" asp-append-version="true"></script>
<script>
    $(document).ready(function () {
        InitializeAccordo('@Url.Action("GetStrutturaSelected", "Accordi")', '@Url.Action("AddAttivita", "Accordi")', '@User.GetUserEmail()');

        // Inizializza gli eventi di gestione dei pulsanti per approva, rifiuta, richiedi integrazione e recedi.
        initApprovaRifiutaIntegraRecediButtons();

        // Inizializza l'evento di gestione del pulsante per il calcolo del diff fra accordi.
        initDiffButton('@Url.Action("GetAccordoDiff", "Accordi")');

        // Inizializza l'evento di gestione del reinvio dati a sistemi esterni
        initResendButtons('@Url.Action("ReSendWorkingDays", "Interop")', '@Url.Action("ReSendWorkingActivities", "Interop")')

        // Inizializza i popover
        $(function () {
            $('[data-toggle="popover"]').popover()
        });

        // Submit form al click del pulsante salva che si trova nelle _ActionsPartial
        $('#saveActionPartial').click(function () {
            // Il parametro trasmetti notifica al metodo Edit se effettuare una trasmissione o meno
            $('#trasmetti').val(false);
            // Il parametro deroga, notifica al metodo Edit se impostare lo stato di valutazione della Segr. Tecnica o trasmettere al responsabile
            $('#deroga').val(false);
            $('#form').submit();
        });

        // Submit form al click del pulsante trasmetti che si trova nelle _ActionsPartial
        $('#saveAndTrasmitActionPartial').click(function () {
            // Il parametro trasmetti notifica al metodo Edit se effettuare una trasmissione o meno
            $('#trasmetti').val(true);
            // Il parametro deroga, notifica al metodo Edit se impostare lo stato di valutazione della Segr. Tecnica o trasmettere al responsabile
            $('#deroga').val($('#DerogaPianificazioneDate').is(":checked"));
            $('#form').submit();
        });

        // Inizializza gli eventi di gestione degli ulteriori dettagli
        initMoreDetailsButtons();
    });
</script>
}